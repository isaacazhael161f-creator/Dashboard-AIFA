<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - AIFA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uQPe5t2w+n/0eFq4gV+c6c+2B8f5R6Lq/8F6zW6r5T3P2E6d5X6qA8Xy6gE6f4h4R4i6V1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <img src="images/emblema-aviacion.png" alt="Emblema de la Aviación" class="login-logo" />
                <h1 class="h3">AIFA - ACCESO</h1>
                <p class="text-muted">Ingrese sus credenciales para continuar</p>
            </div>
            <form id="login-form" class="login-form">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="username" name="username" required placeholder="Ingrese su usuario">
                    <label for="username">Usuario</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="password" class="form-control" id="password" name="password" required placeholder="Ingrese su contraseña">
                    <label for="password">Contraseña</label>
                </div>
                <button type="submit" class="btn btn-primary w-100 py-2">Iniciar Sesión</button>
                <div id="login-error" class="text-danger mt-2"></div>
            </form>
        </div>
    </div>

    <div id="main-app" class="main-app hidden">
        <header class="header p-3">
            <div class="container-fluid">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                         <button class="navbar-toggler d-lg-none me-3" type="button" id="sidebar-toggler">
                            <i class="fas fa-bars"></i>
                        </button>
                        <img src="images/aifa-logo.jpg" alt="Logo AIFA" class="aifa-logo" />
                    </div>
                    <div class="text-center header-center-content">
                        <div class="d-flex align-items-center justify-content-center gap-3">
                            <img src="images/nlu-operacion.png" alt="Logo de Operación NLU" class="header-logo" />
                            <h1 class="main-title">AEROPUERTO INTERNACIONAL FELIPE ÁNGELES</h1>
                            <img src="images/emblema-aviacion.png" alt="Logo de Aviación" class="header-logo" />
                        </div>
                        <div id="current-user" class="text-primary fw-bold mt-2"></div>
                    </div>
                    <div class="d-flex align-items-center gap-3 header-right-content">
                        <div class="formal-clock-container">
                            <div class="clock-label">HORA LOCAL</div>
                            <div class="formal-clock" id="formal-clock">00:00:00</div>
                        </div>
                        <img src="images/gobierno-mexico.png" alt="Logo del Gobierno de México" class="gob-logo" />
                        <a href="#" class="btn btn-outline-danger d-lg-none logout-button-mobile" data-action="logout" title="Cerrar Sesión">
                            <i class="fas fa-sign-out-alt"></i>
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <div class="date-bar bg-light border-bottom text-center p-2">
            <p id="current-date" class="m-0 fw-bold"></p>
        </div>

        <div class="app-body">
            <aside class="sidebar d-flex flex-column p-2" id="sidebar">
                <nav class="nav flex-column" id="sidebar-nav">
                    <a class="menu-item active" href="#" data-section="inicio"><i class="fas fa-home"></i><span>Inicio</span></a>
                    <a class="menu-item" href="#" data-section="itinerario"><i class="fas fa-calendar-alt"></i><span>Itinerario</span></a>
                    <a class="menu-item" href="#" data-section="parte-operaciones"><i class="fas fa-file-invoice"></i><span>Parte de Operaciones</span></a>
                    <a class="menu-item" href="#" data-section="demoras"><i class="fas fa-clock"></i><span>Demoras</span></a>
                    <a class="menu-item" href="#" data-section="operaciones-totales"><i class="fas fa-clipboard-check"></i><span>Operaciones Totales</span></a>
                    <a class="menu-item" id="itinerario-mensual-menu" href="#" data-section="itinerario-mensual"><i class="fas fa-table"></i><span>Itinerario Mensual</span></a>
                    <a class="menu-item" href="#" data-section="comparativa"><i class="fas fa-chart-line"></i><span>Comparativa</span></a>
                    <a class="menu-item logout-item" href="#" data-action="logout"><i class="fas fa-sign-out-alt"></i><span>Cerrar Sesión</span></a>
                </nav>
            </aside>
            <div class="sidebar-overlay" id="sidebar-overlay"></div>

            <main class="main-content flex-grow-1 p-3 p-md-4">
                <div id="inicio-section" class="content-section active">
                    <div class="card">
                        <div class="card-header">
                            <ul class="nav nav-tabs card-header-tabs" id="inicioTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="interactivo-inicio-tab" data-bs-toggle="tab" data-bs-target="#interactivo-inicio-pane" type="button" role="tab" aria-controls="interactivo-inicio-pane" aria-selected="true"><i class="fas fa-table me-2"></i>Vista Interactiva</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="pdf-inicio-tab" data-bs-toggle="tab" data-bs-target="#pdf-inicio-pane" type="button" role="tab" aria-controls="pdf-inicio-pane" aria-selected="false"><i class="fas fa-file-pdf me-2"></i>Documento PDF Original</button>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="inicioTabContent">
                                <div class="tab-pane fade show active" id="interactivo-inicio-pane" role="tabpanel" aria-labelledby="interactivo-inicio-tab" tabindex="0">
                                    <div class="row">
                                        <div class="col-12 col-lg-4 mb-4 mb-lg-0">
                                            <h4 class="mb-3">Resumen por Aerolínea</h4>
                                            <div id="summary-table-container" class="table-responsive"></div>
                                        </div>
                                        <div class="col-12 col-lg-8">
                                            <div id="filter-controls" class="p-3 rounded mb-3">
                                                <div class="input-group">
                                                    <select id="airline-filter" class="form-select">
                                                        <option value="all" selected>Filtrar por aerolínea...</option>
                                                    </select>
                                                    <input type="text" id="claim-filter" class="form-control" placeholder="Filtrar por banda de reclamo...">
                                                </div>
                                            </div>
                                            
                                            <h4 class="mb-3">Itinerario de Pasajeros</h4>
                                            <div id="passenger-itinerary-container" class="table-responsive" style="max-height: 400px; overflow-y: auto;"></div>
                                            
                                            <h4 class="mb-3 mt-4">Itinerario de Carga</h4>
                                            <div id="cargo-itinerary-container" class="table-responsive" style="max-height: 400px; overflow-y: auto;"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pdf-inicio-pane" role="tabpanel" aria-labelledby="pdf-inicio-tab" tabindex="0">
                                     <div class="pdf-container">
                                        <a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a>
                                        <iframe src="pdfs/Itinerario.pdf" width="100%" height="700px" class="border-0"></iframe>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="itinerario-section" class="content-section">
                    <div class="card">
                        <div class="card-header flex-column flex-md-row d-flex justify-content-between align-items-center">
                            <h2 class="mb-3 mb-md-0">ITINERARIO DETALLADO</h2>
                            <div class="d-flex gap-2">
                                <a href="pdfs/itinerario_completo.pdf" class="btn btn-danger download-btn" download><i class="fas fa-file-pdf me-2"></i><span class="btn-text">Descargar PDF</span></a>
                                <a href="excel/itinerario_completo.xlsx" class="btn btn-success download-btn" download><i class="fas fa-file-excel me-2"></i><span class="btn-text">Descargar Excel</span></a>
                            </div>
                        </div>
                        <div class="card-body">
                            <ul class="nav nav-tabs" id="itineraryTab" role="tablist">
                                <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#pasajeros-calor-pane">1. Mapa de Calor (Pasajeros)</button></li>
                                <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#pasajeros-grafica-pane">2. Gráfica (Pasajeros)</button></li>
                                <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#carga-calor-pane">3. Mapa de Calor (Carga)</button></li>
                                <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#carga-grafica-pane">4. Gráfica (Carga)</button></li>
                            </ul>
                            <div class="tab-content pt-3" id="itineraryTabContent">
                                <div class="tab-pane fade show active" id="pasajeros-calor-pane"><div class="pdf-container"><a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a><iframe src="pdfs/mapa_calor_pasajeros.pdf" width="100%" height="700px" class="border-0"></iframe></div></div>
                                <div class="tab-pane fade" id="pasajeros-grafica-pane"><div class="pdf-container"><a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a><iframe src="pdfs/grafica_pasajeros.pdf" width="100%" height="700px" class="border-0"></iframe></div></div>
                                <div class="tab-pane fade" id="carga-calor-pane"><div class="pdf-container"><a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a><iframe src="pdfs/mapa_calor_carga.pdf" width="100%" height="700px" class="border-0"></iframe></div></div>
                                <div class="tab-pane fade" id="carga-grafica-pane"><div class="pdf-container"><a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a><iframe src="pdfs/grafica_carga.pdf" width="100%" height="700px" class="border-0"></iframe></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="parte-operaciones-section" class="content-section">
                    <div class="card">
                        <div class="card-header flex-column flex-md-row d-flex justify-content-between align-items-center">
                            <h2 class="mb-3 mb-md-0">Resumen de operaciones</h2>
                            <div class="d-flex gap-2">
                                <a href="pdfs/parte_operaciones_completo.pdf" class="btn btn-danger download-btn" download><i class="fas fa-file-pdf me-2"></i><span class="btn-text">Descargar PDF</span></a>
                                <a href="excel/parte_operaciones_completo.xlsx" class="btn btn-success download-btn" download><i class="fas fa-file-excel me-2"></i><span class="btn-text">Descargar Excel</span></a>
                            </div>
                        </div>
                        <div class="card-body">
                            <ul class="nav nav-tabs" id="operationsTab" role="tablist">
                                <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#resumen1-pane">Resumen 1</button></li>
                                <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#resumen2-pane">Resumen 2</button></li>
                            </ul>
                            <div class="tab-content pt-3" id="operationsTabContent">
                                <div class="tab-pane fade show active" id="resumen1-pane"><div class="pdf-container"><a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a><iframe src="pdfs/resumen_1.pdf" width="100%" height="700px" class="border-0"></iframe></div></div>
                                <div class="tab-pane fade" id="resumen2-pane"><div class="pdf-container"><a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a><iframe src="pdfs/resumen_2.pdf" width="100%" height="700px" class="border-0"></iframe></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="demoras-section" class="content-section">
                    <div class="card">
                        <div class="card-header"><h2 class="mb-0" id="demoras-title">Análisis de Demoras</h2></div>
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-12 col-lg-4 mb-4 mb-lg-0">
                                    <h3 class="h5 text-center mb-3">Demoras en vuelos de salida</h3>
                                    <div class="table-responsive">
                                        <table class="table table-bordered text-center">
                                            <thead class="table-dark"><tr><th>Causa</th><th>Demoras</th><th>Porcentaje</th></tr></thead>
                                            <tbody id="demoras-tbody"></tbody>
                                            <tfoot id="demoras-tfoot"></tfoot>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-8"><div class="chart-container"><canvas id="delaysChart"></canvas></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="operaciones-totales-section" class="content-section">
                    <div class="card">
                        <div class="card-header"><h2 class="mb-0">Operaciones Totales</h2></div>
                        <div class="card-body">
                            <ul class="nav nav-tabs" id="opTotalesTab" role="tablist">
                                <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#resumen-tablas-pane">Resumen de Operaciones</button></li>
                                <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#informe-estadistico-pane">Informe Estadístico</button></li>
                            </ul>
                            <div class="tab-content pt-3" id="opTotalesTabContent">
                                <div class="tab-pane fade show active" id="resumen-tablas-pane">
                                    <div class="card-op-container card border-0 shadow-sm mb-4">
                                        <div class="card-header bg-transparent d-flex align-items-center"><i class="fas fa-plane-departure fa-2x text-primary me-3"></i><h3 class="mb-0 h5">Aviación Comercial</h3></div>
                                        <div class="card-body"><div class="row align-items-center"><div class="col-lg-6"><div class="table-responsive"><table class="table table-stylish"><thead><tr><th class="text-start">PERIODO</th><th class="text-end">OPERACIONES</th><th class="text-end">PASAJEROS</th></tr></thead><tbody id="comercial-ops-tbody"></tbody><tfoot id="comercial-ops-tfoot" class="table-stylish-footer"></tfoot></table></div></div><div class="col-lg-6"><div class="chart-container"><canvas id="commercialOpsChart"></canvas></div></div></div></div>
                                    </div>
                                    <div class="card-op-container card border-0 shadow-sm mb-4">
                                        <div class="card-header bg-transparent d-flex align-items-center"><i class="fas fa-box-open fa-2x text-primary me-3"></i><h3 class="mb-0 h5">Operaciones de Carga</h3></div>
                                        <div class="card-body"><div class="row align-items-center"><div class="col-lg-6"><div class="table-responsive"><table class="table table-stylish"><thead><tr><th class="text-start">PERIODO</th><th class="text-end">OPERACIONES</th><th class="text-end">TONELADAS</th></tr></thead><tbody id="cargo-ops-tbody"></tbody><tfoot id="cargo-ops-tfoot" class="table-stylish-footer"></tfoot></table></div></div><div class="col-lg-6"><div class="chart-container"><canvas id="cargoOpsChart"></canvas></div></div></div></div>
                                    </div>
                                    <div class="card-op-container card border-0 shadow-sm">
                                        <div class="card-header bg-transparent d-flex align-items-center"><i class="fas fa-plane fa-2x text-primary me-3"></i><h3 class="mb-0 h5">Aviación General</h3></div>
                                        <div class="card-body"><div class="row align-items-center"><div class="col-lg-6"><div class="table-responsive"><table class="table table-stylish"><thead><tr><th class="text-start">PERIODO</th><th class="text-end">OPERACIONES</th><th class="text-end">PASAJEROS</th></tr></thead><tbody id="general-ops-tbody"></tbody><tfoot id="general-ops-tfoot" class="table-stylish-footer"></tfoot></table></div></div><div class="col-lg-6"><div class="chart-container"><canvas id="generalOpsChart"></canvas></div></div></div></div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="informe-estadistico-pane"><div class="pdf-container"><a href="#" class="pdf-zoom-btn" title="Ampliar PDF"><i class="fas fa-search-plus"></i></a><iframe src="pdfs/informe_estadistico.pdf" width="100%" height="700px" class="border-0"></iframe></div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="itinerario-mensual-section" class="content-section"></div>
                
                <div id="comparativa-section" class="content-section">
                     <div class="card border-0">
                        <div class="card-header bg-transparent"><h2 class="mb-0">Análisis Comparativo</h2></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6 mb-4 mb-lg-0">
                                    <div class="pdf-preview-item"><h5 class="mb-2">Comparativa General</h5><div class="pdf-preview-container shadow-sm"><iframe id="pdf-preview-1" src="pdfs/comparativa.pdf"></iframe></div><button class="btn btn-outline-primary w-100 mt-2" data-fullscreen-target="#pdf-preview-1"><i class="fas fa-expand me-2"></i>Ver en Pantalla Completa</button></div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="pdf-preview-item"><h5 class="mb-2">Operatividad de Aerolíneas</h5><div class="pdf-preview-container shadow-sm"><iframe id="pdf-preview-2" src="pdfs/operatividad_aerolineas.pdf"></iframe></div><button class="btn btn-outline-primary w-100 mt-2" data-fullscreen-target="#pdf-preview-2"><i class="fas fa-expand me-2"></i>Ver en Pantalla Completa</button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <div id="pdf-lightbox" class="pdf-lightbox hidden">
        <button id="lightbox-close" class="lightbox-close">&times;</button>
        <div id="lightbox-content" class="lightbox-content"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="script.js"></script>
</body>
</html>